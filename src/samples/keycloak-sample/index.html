<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Keycloak Sample</title>
        <link rel="icon" type="image/x-icon" href="./../../favicon.ico" />
        <style>
            html,
            body {
                margin: 0px;
                padding: 0px;
            }

            .app {
                width: 100%;
                height: 500px;
            }
        </style>
    </head>
    <body>
        <div class="disclaimer">
            <p>
                Note: this application requires additional setup to connect to a Keycloak instance.
            </p>
            <p>The following environment properties should be set via vite:</p>
            <ul>
                <li><code>VITE_KEYCLOAK_CONFIG_URL</code> (the URL to the Keycloak instance)</li>
                <li><code>VITE_KEYCLOAK_CONFIG_REALM</code> (the Keycloak realm)</li>
                <li>
                    <code>VITE_KEYCLOAK_CONFIG_CLIENT_ID</code> (the client id of this application)
                </li>
            </ul>
        </div>
        <script type="module">
            import "./app.ts";
            const body = document.getElementsByTagName("body")[0];

            initApp();

            function initApp() {
                const queryString = window.location.search;
                const urlParams = new URLSearchParams(queryString);
                const lang = urlParams.get("lang");

                const app = document.createElement("keycloak-app-element");
                app.classList.add("app");
                app.setAttribute("id", "test");

                if (lang) {
                    app.setAttribute("forced-locale", lang);
                }

                body.appendChild(app);
            }
        </script>
    </body>
</html>
